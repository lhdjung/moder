<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="moder">
<title>Modes and missing values • moder</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Modes and missing values">
<meta property="og:description" content="moder">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">moder</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/missings.html">Modes and missing values</a>
    <a class="dropdown-item" href="../articles/metadata.html">Modal counts and frequencies</a>
    <a class="dropdown-item" href="../articles/performance.html">Performance</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/lhdjung/moder/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Modes and missing values</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/lhdjung/moder/blob/HEAD/vignettes/missings.Rmd" class="external-link"><code>vignettes/missings.Rmd</code></a></small>
      <div class="d-none name"><code>missings.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/lhdjung/moder" class="external-link">moder</a></span><span class="op">)</span></span></code></pre></div>
<p>What makes moder special is the way it handles missing values. It has
two main guiding principles:</p>
<ol style="list-style-type: decimal">
<li>Mode functions should return <code>NA</code> if and only if the data
cannot answer the user’s question.</li>
<li>Any deviation from point 1 should be the result of an explicit
choice by the user.</li>
</ol>
<p>Both points directly follow from R’s general approach towards missing
values. This vignette explains them in some detail. I recommend reading
“Get started” first if you haven’t already.</p>
<div class="section level2">
<h2 id="return-na-only-if-question-cant-be-answered">1. Return <code>NA</code> only if question can’t be answered<a class="anchor" aria-label="anchor" href="#return-na-only-if-question-cant-be-answered"></a>
</h2>
<div class="section level3">
<h3 id="general-points">General points<a class="anchor" aria-label="anchor" href="#general-points"></a>
</h3>
<p><code>NA</code> is not some other value that shows up in the data. It
is a placeholder for any and all values that we don’t know, so we should
treat it accordingly. This is why <code><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean()</a></code> and
<code><a href="https://rdrr.io/r/stats/median.html" class="external-link">median()</a></code> sometimes return <code>NA</code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">7</span>, <span class="fl">7</span>, <span class="fl">7</span>, <span class="fl">8</span>, <span class="fl">8</span>, <span class="fl">9</span>, <span class="fl">9</span>, <span class="cn">NA</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x1</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] NA</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">x1</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] NA</span></span></code></pre></div>
<p>We don’t know the true value behind <code>NA</code>, so we don’t know
how it would influence the mean or the median. This is always true for
the mean (but not for the median).<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;Strictly speaking, the median has some of the same
complexities as the mode. The median of a vector like
&lt;code&gt;c(1, 1, NA)&lt;/code&gt; or even &lt;code&gt;c(1, 1, 1, 1, 2, 2, NA)&lt;/code&gt; is
known to be &lt;code&gt;1&lt;/code&gt;, regardless of the value behind
&lt;code&gt;NA&lt;/code&gt;. This raises some questions about the way
&lt;code&gt;&lt;a href="https://rdrr.io/r/stats/median.html" class="external-link"&gt;stats::median.default()&lt;/a&gt;&lt;/code&gt; handles missing values.&lt;/p&gt;'><sup>1</sup></a> The mode is a little different: Missing
values will sometimes, but not always, render it unknown. Therefore,
mode implementations require special care and nuance.</p>
<p>In <code>x1</code>, we know that <code>7</code> is a mode. It appears
three times, and even if the <code>NA</code> was actually an
<code>8</code> or a <code>9</code>, that value would only appear three
times, as well. This means we know one mode, but not necessarily the
whole set of modes. <code><a href="../reference/mode_first.html">mode_first()</a></code> is happy to return
<code>7</code>, but <code><a href="../reference/mode_all.html">mode_all()</a></code> insists on the complete set
of modes. It can’t be determined, so the function returns
<code>NA</code>:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x1</span></span>
<span><span class="co">#&gt; [1]  7  7  7  8  8  9  9 NA</span></span>
<span><span class="fu"><a href="../reference/mode_first.html">mode_first</a></span><span class="op">(</span><span class="va">x1</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 7</span></span>
<span><span class="fu"><a href="../reference/mode_all.html">mode_all</a></span><span class="op">(</span><span class="va">x1</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] NA</span></span></code></pre></div>
<p>Some distributions have a clear set of modes even though some of its
values are missing. Here, <code>1</code> is more frequent than
<code>0</code> even if each <code>NA</code> masks another
<code>0</code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">0</span>, <span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/mode_first.html">mode_first</a></span><span class="op">(</span><span class="va">x2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1</span></span>
<span><span class="fu"><a href="../reference/mode_all.html">mode_all</a></span><span class="op">(</span><span class="va">x2</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1</span></span></code></pre></div>
<p>Where is <code><a href="../reference/mode_single.html">mode_single()</a></code> in all of this? It calls
<code><a href="../reference/mode_all.html">mode_all()</a></code> internally, so it handles missing values just
like this function does. Differences only occur if
<code><a href="../reference/mode_all.html">mode_all()</a></code> returns multiple modes.</p>
</div>
<div class="section level3">
<h3 id="possible-minimal-and-maximal-sets-of-modes">Possible (minimal and maximal) sets of modes<a class="anchor" aria-label="anchor" href="#possible-minimal-and-maximal-sets-of-modes"></a>
</h3>
<p>You might want to find all values that are known to be modes, even if
missing values make it unclear whether certain other values are. Use
<code><a href="../reference/mode-possible.html">mode_possible_min()</a></code> for this. You can think of the function
as a less strict version of <code><a href="../reference/mode_all.html">mode_all()</a></code>: It also takes all
modes it can find, but unlike <code><a href="../reference/mode_all.html">mode_all()</a></code>, it doesn’t insist
on the full set of modes.</p>
<p>Either <code>8</code> or <code>9</code> may be a mode, depending on
<code>NA</code>, but <code>7</code> is a mode in any case:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x1</span></span>
<span><span class="co">#&gt; [1]  7  7  7  8  8  9  9 NA</span></span>
<span><span class="fu"><a href="../reference/mode-possible.html">mode_possible_min</a></span><span class="op">(</span><span class="va">x1</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 7</span></span></code></pre></div>
<p>Here, <code>"a"</code> is definitely a mode, <code>"b"</code> is only
a mode if the missing value is also <code>"b"</code>, but
<code>"c"</code> can’t be a mode:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/mode-possible.html">mode_possible_min</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"a"</span>, <span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "a"</span></span></code></pre></div>
<p>Other distributions may not have a clear minimum because too many of
its values are missing. If both <code>NA</code>s below are
<code>FALSE</code>, then <code>FALSE</code> is the mode. Otherwise,
<code>TRUE</code> is:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/mode-possible.html">mode_possible_min</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] NA</span></span></code></pre></div>
<p>The mirror image of <code><a href="../reference/mode-possible.html">mode_possible_min()</a></code> is
<code><a href="../reference/mode-possible.html">mode_possible_max()</a></code>. It returns the greatest possible set
of modes, given the number of missing values. This is all about the
theoretical maximum, so the function can return values that are not
guaranteed to be modes!</p>
<p>As above, <code>"a"</code> is a known mode, <code>"b"</code> may be a
mode, but <code>"c"</code> can’t be one:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/mode-possible.html">mode_possible_max</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"a"</span>, <span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"b"</span>, <span class="st">"c"</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "a" "b"</span></span></code></pre></div>
<p>There is no clear maximum in <code>x1</code> because either
<code>8</code> or <code>9</code> can be a mode, but not both together.
With one more <code>7</code>, though, <code>7</code> is more frequent
anyways:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x1</span></span>
<span><span class="co">#&gt; [1]  7  7  7  8  8  9  9 NA</span></span>
<span><span class="fu"><a href="../reference/mode-possible.html">mode_possible_max</a></span><span class="op">(</span><span class="va">x1</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] NA</span></span>
<span><span class="fu"><a href="../reference/mode-possible.html">mode_possible_max</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">x1</span>, <span class="fl">7</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 7</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="taking-nas-seriously-enough">Taking <code>NA</code>s seriously enough<a class="anchor" aria-label="anchor" href="#taking-nas-seriously-enough"></a>
</h3>
<p>Some earlier mode functions for R treat <code>NA</code> like a known
and constant value. This is suboptimal because <code>NA</code> means
that a value is missing. Such an approach effectively assumes that all
<code>NA</code>s represent the same unknown value, and that it’s
different from all known values (although I’m sure this was not the
intention).</p>
<p>Rather than forming a distinct and cohesive group, however, the
<code>NA</code>s may represent one or more known or unknown values, so
this procedure can distort the data. Consider that <code>NA == NA</code>
returns <code>NA</code>: If any two values are unknown, it’s also
unknown whether they are equal (Wickham 2019, <a href="https://adv-r.hadley.nz/vectors-chap.html#missing-values" class="external-link">ch. 3.2.3</a>).</p>
<p>What’s more, categorizing missing values as a separate group is
actually an imputation strategy — and perhaps not a very wise one. I
think imputation by default is not the job of operations that are
supposed to simply determine a statistic. All moder functions treat
<code>NA</code>s as genuinely missing values, just like
<code><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean()</a></code>, <code><a href="https://rdrr.io/r/stats/median.html" class="external-link">median()</a></code>, and language primitives such
as <code>==</code> do. Sometimes, this means the functions can just
ignore them because a known value is more frequent than the
next-most-frequent value and all <code>NA</code>s taken together. They
will only return <code>NA</code> if the user’s question cannot possibly
be answered by the data.</p>
<p>All choices about imputation will then be left to the user. In this
way, moder functions draw a clear line between estimation and
imputation.</p>
</div>
<div class="section level3">
<h3 id="not-taking-nas-too-seriously">Not taking <code>NA</code>s too seriously<a class="anchor" aria-label="anchor" href="#not-taking-nas-too-seriously"></a>
</h3>
<p>Certain other mode implementations return <code>NA</code> whenever
the input vector contains any <code>NA</code>s at all. This is not
necessary — in fact, it’s overly conservative. We have seen above that a
distribution may have a clear set of modes even if some of its values
are missing. This is a marked difference to <code><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean()</a></code>, where
any missings really do make estimation impossible.</p>
<p>It all depends on the relation between counts: Is the most frequent
known value at least as frequent as the sum of the counts of the
second-most-frequent known value and all missing values? If so, this
value is known to be the mode. Note that <code><a href="../reference/mode_all.html">mode_all()</a></code> doesn’t
allow for ties among known values if any other values are missing (it
returns <code>NA</code>). That is because missings may secretly count
for any “tied” known value, which would break the tie.</p>
<p>In a vector like <code>c(1, 1, NA)</code>, the mode is clearly
<code>1</code>, no matter what the <code>NA</code> stands for. It is
just as clear as in <code>c(1, 1, 2)</code>. A mode function that
returns <code>NA</code> instead of <code>1</code> would be incorrect for
<code>c(1, 1, 2)</code>, so it would be just as incorrect for
<code>c(1, 1, NA)</code>.</p>
<p>Again, think of the parallels to base R. <code>NA ^ 2</code> returns
<code>NA</code>, but <code>NA ^ 0</code> returns <code>1</code>. In the
second case, we don’t need to know the true value behind <code>NA</code>
to determine the result. Such knowledge is built into R (Wickham 2019,
<a href="https://adv-r.hadley.nz/vectors-chap.html#missing-values" class="external-link">ch. 3.2.3</a>),
and I think function design should emulate this pattern to keep the
semantics of <code>NA</code> consistent across contexts.</p>
</div>
<div class="section level3">
<h3 id="na-return-types">
<code>NA</code> return types<a class="anchor" aria-label="anchor" href="#na-return-types"></a>
</h3>
<p>If a function that is supposed to return one or more modes returns
<code>NA</code> instead, this <code>NA</code> has the same type as the
input vector, <code>x</code>. Functions that attempt to count modes or
to determine their frequency only ever return these integers or
<code>NA_integer_</code>, i.e., a missing value of type integer.
However, the differences between <code>NA</code> types are not very
important (and perhaps not widely known). They can usually be
disregarded.</p>
</div>
</div>
<div class="section level2">
<h2 id="still-return-non-na-value-only-if-chosen-by-user">2. Still return non-<code>NA</code> value only if chosen by
user<a class="anchor" aria-label="anchor" href="#still-return-non-na-value-only-if-chosen-by-user"></a>
</h2>
<div class="section level3">
<h3 id="ignoring-nas">Ignoring <code>NA</code>s<a class="anchor" aria-label="anchor" href="#ignoring-nas"></a>
</h3>
<p>Each moder function that attempts to determine (actual) modes has an
<code>na.rm</code> argument. This works exactly like in
<code><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean()</a></code> and <code><a href="https://rdrr.io/r/stats/median.html" class="external-link">median()</a></code>: It’s <code>FALSE</code>
by default, but if the user sets it to <code>TRUE</code>, missing values
are removed from <code>x</code> before the statistic is computed.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x1</span></span>
<span><span class="co">#&gt; [1]  7  7  7  8  8  9  9 NA</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">x1</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 7.857143</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/median.html" class="external-link">median</a></span><span class="op">(</span><span class="va">x1</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 8</span></span>
<span><span class="fu"><a href="../reference/mode_all.html">mode_all</a></span><span class="op">(</span><span class="va">x1</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 7</span></span></code></pre></div>
<p>You should think really carefully before removing <code>NA</code>s.
Are you sure the missing values are unnecessary to answer your specific
question?</p>
<p>This approach makes sure to inform the user if the data can’t answer
their questions. They might still choose to ignore missings, but this
will always require an explicit statement. In this way, users will know
what they are doing, and can make their own decisions about data
analysis.</p>
</div>
<div class="section level3">
<h3 id="the-first-known-mode">The first known mode<a class="anchor" aria-label="anchor" href="#the-first-known-mode"></a>
</h3>
<p><code><a href="../reference/mode_first.html">mode_first()</a></code> has a Boolean <code>first_known</code>
argument that is <code>FALSE</code> by default. If set to
<code>TRUE</code>, the function will pick the first value known to be a
mode. This means it won’t strictly look for the first-appearing value
that is a mode, but accept the first value that is a mode without
counting <code>NA</code>s in its favor:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">4</span>, <span class="fl">4</span>, <span class="fl">4</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/mode_first.html">mode_first</a></span><span class="op">(</span><span class="va">x3</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] NA</span></span>
<span><span class="fu"><a href="../reference/mode_first.html">mode_first</a></span><span class="op">(</span><span class="va">x3</span>, first_known <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 4</span></span></code></pre></div>
<p>The <code>NA</code>s might both be <code>6</code>, and a known
<code>6</code> appears at the very start, so this might be the first
mode. It’s unclear, so we get <code>NA</code> by default. However,
<code>4</code> is the first value that we <em>know</em> is a mode.
Setting <code>first_known</code> to <code>TRUE</code> makes the function
pragmatically accept <code>4</code> — we want to find a mode, after all,
and we know one.</p>
</div>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Wickham, H. (2019). <em>Advanced R</em> (Second Edition), CRC
Press/Taylor and Francis Group. <a href="https://adv-r.hadley.nz/index.html" class="external-link uri">https://adv-r.hadley.nz/index.html</a>.</p>
</div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Lukas Jung.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
